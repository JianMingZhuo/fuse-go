# 各个操作的触发情况

* `getattr()`: 用于查询节点是否存在、查询节点属性等动作

    * 当调用系统`stat()`fuse程序目录中的文件时，会对Ino为1的文件（fuse根目录）调用`getattr()`，会有缓存。

* `lookup()`: 对应着系统函数`stat()`，会对`stat()`函数的各级目录及最后的文件依次调用`lookup()`。

* `readdir()`: 获取目录的内容，`readdir()`会在读取目录的时候触发，并且需要`releasedir()`释放打开。获取目录文件下内容的操作顺序一般为`opendir()` -> `readdir()` -> `releasedir()`，操作系统一般会对获取到的文件调用`lookup()`的操作。

* `fsyncdir()`: 同步目录的内容，一般是文件夹对象调用`sync()`函数（封装后），或者是系统函数`fsync()`。

* `mkdir()`: 创建文件夹，一般系统会先调用`lookup()`检查文件是否存在。

* `rmdir()`: 删除目录，一般系统会先调用`lookup()`检查文件夹是否存在和是否是文件夹。部分语言（比如golang，所以单元测试中是调用`syscall.rmdir()`）封装的文件删除，会先调用`unlink()`再调用`rmdir()`，并且会检查`unlink()`返回的错误是否是`ENOTDIR`。

* `setxattr()`: 设置文件的扩展属性，一般系统会先调用`lookup()`检查文件是否存在，但不会打开文件。

* `getxattr()`: 获取文件的扩展属性，一般系统会先调用`lookup()`检查文件是否存在，但不会打开文件(PS: `lookup()`会有缓存的，比如`setxattr()`前调用了`lookup()`，后面的`getxattr()`就不需要了)。

* `listxattr()`: 列出文件所有扩展属性名，一般系统会先调用`lookup()`检查文件是否存在，但不会打开文件(PS: 同上)。

* `removexattr()`: 删除文件指定的扩展属性，一般系统会先调用`lookup()`检查文件是否存在，但不会打开文件(PS: 同上)。

* `symlink()`: 创建软连接。

* `readlink()`: 读取软连接文件指向的路径。